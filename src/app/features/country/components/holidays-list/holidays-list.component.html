@let holidaysObs = holidays$;
@if (holidaysObs | async; as holidays) {
  <table mat-table [dataSource]="holidays" class="table">
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef>Date</th>
      <td mat-cell *matCellDef="let holiday">
        {{ holiday.date | date: 'yyyy-MM-dd' }}
      </td>
    </ng-container>

    <ng-container matColumnDef="localName">
      <th mat-header-cell *matHeaderCellDef>Local Name</th>
      <td mat-cell *matCellDef="let holiday">{{ holiday.localName }}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>English Name</th>
      <td mat-cell *matCellDef="let holiday">{{ holiday.name }}</td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let holiday">
        {{ holiday.types?.join(', ') }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <div class="pagination">
    @for (year of yearsRange(); track year) {
      <button
        class="pagination-item"
        mat-raised-button
        [ngClass]="{ 'active-year': year === currentYear() }"
        (click)="changeYear(year)"
      >
        {{ year }}
      </button>
    }
  </div>
} @else {
  <p>Loading holidays...</p>
}
